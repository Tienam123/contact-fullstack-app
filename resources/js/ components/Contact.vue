<script setup>
import {onMounted, ref} from "vue";
const props = defineProps(['currentContact'])
const emit = defineEmits(['update-user-photo'])

const fileInput = ref(null);
import logo from "../assets/avatar.jpg";
import axios from "axios";


const uploadImg = (e) => {
    console.log(e.target.files[0]);
    const file = e.target.files[0];
    const formData = new FormData();
    formData.append('image', file);
    formData.append('id', props.currentContact.id);
    axios.post('http://localhost/api/user/upload-image',formData,{
        headers:{
            'Content-Type': 'multipart/form-data'
        }
    }).then(res => {
        console.log(res.data)
        fileInput.value.src = res.data
        emit('update-user-photo',props.currentContact.id,res.data)
    })
}


</script>

<template>
  <div class="wrapper">
      <h2 class="card__title">Kontakt yaratish</h2>
      <div class="card">
          <div class="card__header">
                  <label for="avatar_upload">
                     <div class="avatar-upload">
                         <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                             <path d="M1.5 10.5V6.5C1.5 5.39543 2.39543 4.5 3.5 4.5H10.5M1.52693 18.829C1.68385 19.777 2.5075 20.5 3.5 20.5H15.5C16.6046 20.5 17.5 19.6046 17.5 18.5V14.6901M1.52693 18.829C1.50922 18.722 1.5 18.6121 1.5 18.5V15.5M1.52693 18.829L5.34762 15.0083C6.02765 14.4133 7.02219 14.3481 7.774 14.8494L8.2832 15.1888C9.0078 15.6719 9.9619 15.6305 10.642 15.0864L13.2901 12.9679C13.9651 12.4279 14.9053 12.3855 15.6228 12.8484C15.7023 12.8997 15.7731 12.9632 15.84 13.0301L17.5 14.6901M17.5 14.6901L17.5 11.5M17.5 7.5V4.5M17.5 1.5V4.5M17.5 4.5H14.5H20.5M8.5 9.5C8.5 10.6046 7.6046 11.5 6.5 11.5C5.39543 11.5 4.5 10.6046 4.5 9.5C4.5 8.39543 5.39543 7.5 6.5 7.5C7.6046 7.5 8.5 8.39543 8.5 9.5Z" stroke="#394867" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                         </svg>
                     </div>
                  </label>
                  <input @change="uploadImg" type="file" name="" id="avatar_upload">
              <img ref="fileInput" width="144" height="144" :src="currentContact.image?currentContact.image:logo" alt="23532">
          </div>
          <div class="card__content">
              <ul class="card__list card-list">
                  <li class="card-list__item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <path
                              d="M10 8.33332C11.841 8.33332 13.3333 6.84094 13.3333 4.99999C13.3333 3.15904 11.841 1.66666 10 1.66666C8.15906 1.66666 6.66667 3.15904 6.66667 4.99999C6.66667 6.84094 8.15906 8.33332 10 8.33332Z"
                              stroke="#394867" stroke-width="1.5"/>
                          <path
                              d="M16.6646 15C16.6667 14.8632 16.6667 14.7242 16.6667 14.5833C16.6667 12.5123 13.6819 10.8333 10 10.8333C6.3181 10.8333 3.33334 12.5123 3.33334 14.5833C3.33334 16.6544 3.33334 18.3333 10 18.3333C11.8592 18.3333 13.1998 18.2028 14.1667 17.9695"
                              stroke="#394867" stroke-width="1.5" stroke-linecap="round"/>
                      </svg>
                      <span>{{currentContact.name}}</span>
                  </li>
                  <li class="card-list__item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <path
                              d="M5.83334 10C7.21405 10 8.33334 8.88071 8.33334 7.5C8.33334 6.11929 7.21405 5 5.83334 5C4.45262 5 3.33334 6.11929 3.33334 7.5C3.33334 8.88071 4.45262 10 5.83334 10Z"
                              stroke="#394867" stroke-width="1.5"/>
                          <path
                              d="M6.66667 11.6667C6.66667 11.6667 6.25 11.6667 5 11.6667C3.75 11.6667 0.833336 12.5 0.833336 14.5833C0.833336 16.1942 0.833336 17.5 4.16668 17.5C6.66667 17.5 7.5 17.5 7.5 17.5"
                              stroke="#394867" stroke-width="1.5" stroke-linecap="round"/>
                          <path
                              d="M13.75 9.16668C15.3608 9.16668 16.6667 7.86084 16.6667 6.25001C16.6667 4.63918 15.3608 3.33334 13.75 3.33334C12.1392 3.33334 10.8333 4.63918 10.8333 6.25001C10.8333 7.86084 12.1392 9.16668 13.75 9.16668Z"
                              stroke="#394867" stroke-width="1.5"/>
                          <path
                              d="M19.165 14.537C19.1667 14.4154 19.1667 14.2919 19.1667 14.1667C19.1667 12.3257 16.7416 10.8333 13.75 10.8333C10.7585 10.8333 8.33333 12.3257 8.33333 14.1667C8.33333 16.0076 8.33333 17.5 13.75 17.5C15.2606 17.5 16.3499 17.3839 17.1354 17.1766"
                              stroke="#394867" stroke-width="1.5" stroke-linecap="round"/>
                      </svg>
                      <span>{{currentContact.surname}}</span>
                  </li>
                  <li class="card-list__item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                          <path
                              d="M1.38379 4.31659C1.3633 3.9348 1.03714 3.64191 0.655292 3.6624C0.273445 3.6829 -0.0194816 4.00902 0.0010131 4.3908L1.38379 4.31659ZM2.27545 0.778013C2.0121 1.05523 2.02338 1.49341 2.30064 1.75672C2.5779 2.02003 3.01614 2.00876 3.2795 1.73154L2.27545 0.778013ZM7.76507 16.2114C8.08883 16.4148 8.51627 16.3174 8.71974 15.9937C8.92321 15.67 8.82563 15.2426 8.50186 15.0391L7.76507 16.2114ZM11.8722 16.4386C11.498 16.3602 11.131 16.6001 11.0526 16.9743C10.9742 17.3485 11.2141 17.7154 11.5884 17.7938L11.8722 16.4386ZM12.363 12.2713L12.7834 11.8287L11.7794 10.8752L11.3589 11.3178L12.363 12.2713ZM14.167 11.6424L15.9307 12.6574L16.6215 11.4575L14.8578 10.4424L14.167 11.6424ZM16.2711 14.7619L14.9597 16.1424L15.9638 17.0959L17.2752 15.7155L16.2711 14.7619ZM5.63722 12.6544C2.05884 8.88754 1.45861 5.71022 1.38379 4.31659L0.0010131 4.3908C0.0926391 6.09771 0.817504 9.59136 4.63318 13.6079L5.63722 12.6544ZM6.90692 6.52806L7.17174 6.24934L6.16766 5.29581L5.90287 5.57453L6.90692 6.52806ZM7.37973 2.77916L6.21559 1.13292L5.08488 1.93225L6.24901 3.57847L7.37973 2.77916ZM6.4049 6.05129C5.90287 5.57453 5.90223 5.5752 5.90159 5.57588C5.90138 5.57612 5.90073 5.5768 5.90029 5.57726C5.89941 5.5782 5.89851 5.57915 5.89761 5.58013C5.89579 5.58209 5.89391 5.58413 5.89198 5.58626C5.8881 5.59052 5.88399 5.59512 5.87967 5.60009C5.87104 5.61002 5.86155 5.62137 5.8514 5.6342C5.83111 5.65984 5.80815 5.69134 5.78407 5.72897C5.73577 5.80444 5.68339 5.90382 5.63904 6.02845C5.54884 6.28189 5.49969 6.61751 5.56111 7.03664C5.68178 7.86011 6.22143 8.96748 7.63149 10.4517L8.63554 9.49823C7.31751 8.11081 6.99287 7.25635 6.93125 6.83591C6.90153 6.63307 6.93173 6.52619 6.94368 6.49263C6.95039 6.47377 6.95478 6.46852 6.95049 6.47524C6.9484 6.47849 6.94425 6.4846 6.93727 6.49343C6.93377 6.49784 6.92957 6.50293 6.92455 6.50871C6.92204 6.51159 6.91932 6.51465 6.91639 6.51788C6.91492 6.51949 6.9134 6.52114 6.91182 6.52284C6.91103 6.52369 6.91023 6.52455 6.90941 6.52542C6.909 6.52585 6.90838 6.52652 6.90817 6.52673C6.90754 6.52739 6.90692 6.52806 6.4049 6.05129ZM7.63149 10.4517C9.03731 11.9316 10.0992 12.5134 10.9093 12.645C11.3249 12.7124 11.6614 12.6585 11.9162 12.5581C12.0407 12.509 12.1393 12.4513 12.2132 12.3989C12.2501 12.3727 12.2808 12.3478 12.3057 12.3261C12.318 12.3153 12.329 12.3051 12.3385 12.2959C12.3433 12.2913 12.3477 12.2869 12.3517 12.2829C12.3538 12.2808 12.3558 12.2788 12.3576 12.2769C12.3586 12.2759 12.3595 12.275 12.3603 12.2741C12.3608 12.2736 12.3614 12.2729 12.3617 12.2727C12.3623 12.272 12.363 12.2713 11.861 11.7946C11.3589 11.3178 11.3596 11.3172 11.3601 11.3165C11.3604 11.3162 11.361 11.3156 11.3614 11.3151C11.3623 11.3143 11.3631 11.3135 11.3638 11.3126C11.3655 11.311 11.3671 11.3093 11.3686 11.3078C11.3717 11.3047 11.3746 11.3018 11.3774 11.2991C11.383 11.2937 11.388 11.2891 11.3924 11.2852C11.4013 11.2775 11.4079 11.2725 11.4121 11.2695C11.4207 11.2634 11.4199 11.2655 11.408 11.2701C11.3902 11.2771 11.3064 11.3067 11.1312 11.2783C10.7596 11.2179 9.95763 10.89 8.63554 9.49823L7.63149 10.4517ZM6.21559 1.13292C5.27986 -0.19033 3.40744 -0.413577 2.27545 0.778013L3.2795 1.73154C3.76217 1.22345 4.61189 1.26337 5.08488 1.93225L6.21559 1.13292ZM14.9597 16.1424C14.7021 16.4136 14.4326 16.5588 14.1706 16.5847L14.3067 17.9626C14.9963 17.8945 15.5544 17.5267 15.9638 17.0959L14.9597 16.1424ZM7.17174 6.24934C8.06492 5.30905 8.12816 3.83757 7.37973 2.77916L6.24901 3.57847C6.63873 4.12959 6.57897 4.86284 6.16766 5.29581L7.17174 6.24934ZM15.9307 12.6574C16.6886 13.0936 16.8368 14.1664 16.2711 14.7619L17.2752 15.7155C18.4799 14.4473 18.129 12.325 16.6215 11.4575L15.9307 12.6574ZM12.7834 11.8287C13.1392 11.4542 13.6937 11.37 14.167 11.6424L14.8578 10.4424C13.8437 9.85877 12.586 10.0261 11.7794 10.8752L12.7834 11.8287ZM8.50186 15.0391C7.59373 14.4685 6.62715 13.6964 5.63722 12.6544L4.63318 13.6079C5.69856 14.7294 6.75407 15.5762 7.76507 16.2114L8.50186 15.0391ZM14.1706 16.5847C13.6661 16.6345 12.8676 16.647 11.8722 16.4386L11.5884 17.7938C12.741 18.0351 13.6828 18.0242 14.3067 17.9626L14.1706 16.5847Z"
                              fill="#394867"/>
                      </svg>
                      <span>{{currentContact.phone}}</span>
                  </li>
                  <li class="card-list__item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="16" viewBox="0 0 20 16" fill="none">
                          <path
                              d="M18.5 10.9853C18.5 13.9706 16.8 15.25 14.25 15.25H5.75C3.2 15.25 1.5 13.9706 1.5 10.9853V5.01471C1.5 2.02941 3.2 0.75 5.75 0.75H14.25C16.8 0.75 18.5 2.02941 18.5 5.01471V6.29412"
                              stroke="#394867" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                              stroke-linejoin="round"/>
                          <path
                              d="M15.7543 4.39105L11.0394 8.04701C10.4271 8.52168 9.57271 8.52168 8.96045 8.04701L4.24548 4.39105"
                              stroke="#394867" stroke-width="1.5" stroke-linecap="round"/>
                      </svg>
                      <span>{{currentContact.email}}</span>
                  </li>
              </ul>
              <button class="card__btn-favorite">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" :fill="currentContact.isFavorite?'orange':'none'">
                      <g clip-path="url(#clip0_65_1876)">
                          <path
                              d="M7.62763 4.507C8.68317 2.61346 9.21092 1.66669 10 1.66669C10.7891 1.66669 11.3168 2.61345 12.3723 4.507L12.6454 4.99688C12.9454 5.53496 13.0953 5.80401 13.3293 5.98153C13.5631 6.15905 13.8543 6.22494 14.4368 6.35673L14.9671 6.47671C17.0168 6.94049 18.0417 7.17237 18.2855 7.95646C18.5293 8.74052 17.8307 9.5576 16.4333 11.1916L16.0718 11.6144C15.6747 12.0787 15.4761 12.3109 15.3868 12.5981C15.2975 12.8854 15.3275 13.1951 15.3875 13.8147L15.4422 14.3787C15.6534 16.5589 15.7591 17.6489 15.1208 18.1335C14.4823 18.6181 13.5228 18.1763 11.6036 17.2927L11.1071 17.064C10.5617 16.8129 10.2891 16.6874 10 16.6874C9.71092 16.6874 9.43825 16.8129 8.89292 17.064L8.39642 17.2927C6.47723 18.1763 5.51765 18.6181 4.87929 18.1335C4.24093 17.6489 4.34657 16.5589 4.55783 14.3787L4.61248 13.8147C4.67252 13.1951 4.70254 12.8854 4.61322 12.5981C4.5239 12.3109 4.32536 12.0787 3.92827 11.6144L3.56675 11.1916C2.16937 9.5576 1.47068 8.74052 1.71452 7.95646C1.95835 7.17237 2.98322 6.94049 5.03295 6.47671L5.56324 6.35673C6.14571 6.22494 6.43694 6.15905 6.67078 5.98153C6.90462 5.80401 7.05461 5.53497 7.35456 4.99688L7.62763 4.507Z"
                              stroke="white" stroke-width="1.5"/>
                      </g>
                      <defs>
                          <clipPath id="clip0_65_1876">
                              <rect width="20" height="20" fill="white"/>
                          </clipPath>
                      </defs>
                  </svg>
                  <span>Favorite</span>
              </button>
          </div>
      </div>
  </div>
</template>



<style scoped lang="scss">
.hero {
    padding: 48px;
}
.wrapper {
    width: 30%;
}

.card {
    border-radius: 20px;
    background: #394867;
    &__title {
        color: #212A3E;
        font-size: 26px;
        font-style: normal;
        font-weight: 500;
        line-height: 32px; /* 123.077% */
        margin-bottom: 20px;
    }
    // .card__header
    &__header {
        display: flex;
        padding: 29px 0;
        justify-content: center;
        align-items: center;
        position: relative;


            input {
                opacity: 0;
                visibility: hidden;
                width: 0;
                height: 0;
        }
        img {
            border-radius: 50%;
        }
    }
    .avatar-upload {
        background: #fff;
        padding: 5px;
        border-radius: 50%;
        border:1px solid #212A3E;
        cursor: pointer;
        position: absolute;
        bottom: 50px;
        right: 76px;
    }
    // .card__content
    &__content {
        background: #F6F9FA;
        border-radius: 18px;
        padding: 16px;
    }
    // .card__list
    &__list {

    }

    // .card__btn-favorite
    &__btn-favorite {
        outline: 1px solid black;
        display: flex;
        width: 100%;
        padding: 8px;
        background: #394867;
        color: white;
        border-radius: 8px;
        align-items: center;
        margin-bottom: 12px;
        span {
            margin-left: 10px;
            position: relative;
            &::before {
                content: "";
                position: absolute;
                width: 1px;
                height: 100%;
                top: 0;
                left: -5px;
                display: block;
                background-color:  #fff;
            }
        }
    }
}

.card-list {
    // .card-list__item
    &__item {
        border-radius: 8px;
        border: 1px solid #394867;
        display: flex;
        justify-content: start;
        align-items: center;
        padding: 8px;
        margin-bottom: 10px;
        span {
            margin-left: 10px;
            position: relative;
            &::before {
                content: "";
                position: absolute;
                width: 1px;
                height: 100%;
                top: 0;
                left: -5px;
                display: block;
                background-color:  #394867;
            }
        }
    }
}
</style>
